<!DOCTYPE html>
<html>

<head>
  <title>Title</title>
  
  <style>
    .main
    {
      
    }
    
    .headerbox
    {
      border-style: solid;
      
      margin-top: 50px;
      margin-left: 50px;
      width: 100px;
      height: 150px;
    }
    .body
    {
      border-style: solid;
      
      width: 60%;
      margin: auto;
      padding: 20px;
    }
    
    .hpbar
    {
      background-color: red;
      text-align: center;
      
      margin-top: 50px;
      margin-left: 50px;
      width: 200px;
      height: 30px;
    }
    .spbar
    {
      background-color: green;
      text-align: center;
      
      margin-top: 5px;
      margin-left: 50px;
      width: 200px;
      height: 30px;
    }
    .statdesc
    {
      margin-top: 5px;
      margin-left: 50px;
    }
    
  </style>
</head>
<script>
  function setCookie(cname, cvalue, exdays) {
      var d = new Date();
      d.setTime(d.getTime() + (exdays*24*60*60*1000));
      var expires = "expires="+d.toUTCString();
      document.cookie = cname + "=" + cvalue + "; " + expires;
  }
  
  function getCookie(cname)
  {
    var name = cname + "=";
    var ca = document.cookie.split(';');
    for(var i=0; i<ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1);
        if (c.indexOf(name) == 0) return c.substring(name.length,c.length);
    }
    return "";
  }
  
  function selectEvent(indicator)
  {
    var path;
    switch (indicator)
    {
      case 1:
        path = path1;
        break;
      case 2:
        path = path2;
        break;
      case 3:
        path = path3;
        break;
      case 4:
        path = path4;
        break;
    }
     document.getElementById("log").innerHTML = path1 + path2 + path3 + path4;
    setCookie("position", path, 365);
    reload();
  }
</script>
<body>
  <div class = "main">
    <div id = "hpbar" class = "hpbar"></div>
    <span id = "hptext" class = "statdesc">Health: 100/100</span><br />
    <div id = "spbar" class = "spbar"></div>
    <span id = "sptext" class = "statdesc">Stamina: 100/100</span><br />
    <br /><br />
    <div id = "log" class = "body"></div>
    <br />
    <div class = "body" style = "width: 30%">
      <div id = "choice1"></div>
      <div id = "choice2"></div>
      <div id = "choice3"></div>
      <div id = "choice4"></div>
    </div>
  </div>
</body>

<script>
  var text = "";
  var hp = 100;
  var sp = 100;
  var maxhp = 100;
  var maxsp = 100;
  var hpincrease = 0;
  var spincrease = 0;
  var maxhpincrease = 0;
  var maxspincrease = 0;
  
  var choices = "";
  var choice1 = "";
  var choice2 = "";
  var choice3 = "";
  var choice4 = "";
  var path1 = "";
  var path2 = "";
  var path3 = "";
  var path4 = "";
  
  var position = getCookie("position");
  if (position != "")
  {
    hp = parseInt(getCookie("hp"));
    sp = parseInt(getCookie("sp"));
    maxhp = parseInt(getCookie("maxhp"));
    maxsp = parseInt(getCookie("maxsp"));
    position = parseInt(position);
  }
  else
  {
    position = 0;
  }
  
  if (hp == ""){ hp = 100; }
  if (sp == ""){ sp = 100; }
  if (maxhp == ""){ maxhp = 100; }
  if (maxsp == ""){ maxsp = 100; }
  switch (position)
  {
    // Title
    case 0:
      text = "<b><font size = 150%>The Adventurer's Forest</font></b><br />A text-based roleplaying game<br /><br /><br />Click the text below to advance.";
      choices = "Next ~ 1";
      break;
    // Introduction
    case 1:
      text = "Your name is Dia.<br /><br />You have adventured far and wide, searching for your own path and trying to find a way to help the world. Finally you have found an epic quest to captivate your interest, and help the continent of Fauxe along the way!<br />As you understand it, the continent has been under siege by a Dark Lord, hellbent on conquering first Fauxe, then the rest of the world. The only way to stop him is to collect powerful magic-filled orbs and combat him face to face."
      break;
  }
  
  var i = 0;
  var choicetextdump = "";
  while (i < choices.length)
  {
    if (choices.charAt(i) != "~" && choices.charAt(i) != ";")
    {
      choicetextdump += choices.charAt(i);
    }
    else
    {
      if (choice1 == "" || path1 == "")
      {
        if (choices.charAt(i) == "~") { choice1 = choicetextdump; alert('1'); }
        else { path1 = parseInt(choicetextdump); alert('2'); }
      }
      else if (choice2 == "" || path2 == "")
      {
        if (choices.charAt(i) == "~") { choice2 = choicetextdump; }
        else { path2 = parseInt(choicetextdump); }
      }
      else if (choice3 == "" || path3 == "")
      {
        if (choices.charAt(i) == "~") { choice3 = choicetextdump; }
        else { path3 = parseInt(choicetextdump); }
      }
      else if (choice4 == "" || path4 == "")
      {
        if (choices.charAt(i) == "~") { choice4 = choicetextdump; }
        else { path4 = parseInt(choicetextdump); }
      }
      
      choicetextdump = "";
    }
    
    i++;
  }
  
  hp += hpincrease;
  sp += spincrease;
  
  if (hp > maxhp) { hp = maxhp; }
  if (sp > maxsp) { sp = maxsp; }

  document.getElementById("log").innerHTML = text;
  document.getElementById("hptext").innerText = "Health: " + hp + "/" + maxhp;
  document.getElementById("sptext").innerText = "Stamina: " + sp + "/" + maxsp;
  document.getElementById("hpbar").width = (document.getElementById("hpbar").width / maxhp) * hp;
  document.getElementById("spbar").width = (document.getElementById("spbar").width / maxsp) * sp;
  
  if (choice1 != ""){ document.getElementById("choice1").innerHTML = "<a href = '#' onclick = 'selectEvent(1)'>" + choice1 +"</a>"; }
  if (choice2 != ""){ document.getElementById("choice2").innerHTML = "<a href = '#' onclick = 'selectEvent(2)'>" + choice2 +"</a>"; }
  if (choice3 != ""){ document.getElementById("choice3").innerHTML = "<a href = '#' onclick = 'selectEvent(3)'>" + choice3 +"</a>"; }
  if (choice4 != ""){ document.getElementById("choice4").innerHTML = "<a href = '#' onclick = 'selectEvent(4)'>" + choice4 +"</a>"; }
  
  setCookie("hp", hp, 365);
  setCookie("sp", sp, 365);
  setCookie("maxhp", maxhp, 365);
  setCookie("maxsp", maxsp, 365);
</script>

</html>
