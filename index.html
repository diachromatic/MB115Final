<!DOCTYPE html>
<html>

<head>
  <title>Title</title>
  
  <style>
    .main
    {
      
    }
    
    .headerbox
    {
      border-style: solid;
      
      margin-top: 50px;
      margin-left: 50px;
      width: 100px;
      height: 150px;
    }
    .body
    {
      border-style: solid;
      
      width: 60%;
      margin: auto;
      padding: 20px;
    }
    
    .hpbar
    {
      background-color: red;
      text-align: center;
      
      margin-top: 50px;
      margin-left: 50px;
      width: 200px;
      height: 30px;
    }
    .spbar
    {
      background-color: green;
      text-align: center;
      
      margin-top: 5px;
      margin-left: 50px;
      width: 200px;
      height: 30px;
    }
    .statdesc
    {
      margin-top: 5px;
      margin-left: 50px;
    }
    
  </style>
</head>
<script>
  function setCookie(cname, cvalue, exdays) {
      var d = new Date();
      d.setTime(d.getTime() + (exdays*24*60*60*1000));
      var expires = "expires="+d.toUTCString();
      document.cookie = cname + "=" + cvalue + "; " + expires;
  }
  
  function getCookie(cname)
  {
    var name = cname + "=";
    var ca = document.cookie.split(';');
    for(var i=0; i<ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1);
        if (c.indexOf(name) == 0) return c.substring(name.length,c.length);
    }
    return "";
  }
  
  function selectEvent(indicator)
  {
    // store new event position to cookie
  }
</script>
<body>
  <div class = "main">
    <div id = "hpbar" class = "hpbar"></div>
    <span id = "hptext" class = "statdesc">Health: 100/100</span><br />
    <div id = "spbar" class = "spbar"></div>
    <span id = "sptext" class = "statdesc">Stamina: 100/100</span><br />
    <br /><br />
    <div id = "log" class = "body"></div>
    <br />
    <div class = "body" style = "width: 30%">
      <div id = "choice1"></div>
      <div id = "choice2"></div>
      <div id = "choice3"></div>
      <div id = "choice4"></div>
    </div>
  </div>
</body>

<script>
  var text = "";
  var hp = 100;
  var sp = 100;
  var maxhp = 100;
  var maxsp = 100;
  var hpincrease = 0;
  var spincrease = 0;
  var maxhpincrease = 0;
  var maxspincrease = 0;
  
  var choices = "";
  var choice1 = "";
  var choice2 = "";
  var choice3 = "";
  var choice4 = "";
  var path1 = "";
  var path2 = "";
  var path3 = "";
  var path4 = "";
  
  var position = getCookie("position");
  if (position != "")
  {
    hp = parseInt(getCookie("hp"));
    sp = parseInt(getCookie("sp"));
    maxhp = parseInt(getCookie("maxhp"));
    maxsp = parseInt(getCookie("maxsp"));
  }
  
  if (hp == ""){ hp = 100; }
  if (sp == ""){ sp = 100; }
  if (maxhp == ""){ maxhp = 100; }
  if (maxsp == ""){ maxsp = 100; }
  
  switch (position)
  {
    case "":
      text = "Introductory scene";
      choices = "First choice ~ 1; Second choice ~ 2";
      break;
  }
  
  var i = 0;
  var choicetextdump = "";
  while (i < choices.length)
  {
    if (choices.substr(i, i + 1) != "~" && choices.substr(i, i + 1) != ";")
    {
      choicetextdump += choices.substr(i, i + 1);
    }
    else
    {
      if (choice1 == "")
      {
        if (choices.substr(i, i + 1) == "~") { choice1 = choicetextdump; }
        else { path1 = parseInt(choicetextdump); }
      }
      else if (choice2 == "")
      {
        if (choices.substr(i, i + 1) == "~") { choice2 = choicetextdump; }
        else { path2 = parseInt(choicetextdump); }
      }
      else if (choice3 == "")
      {
        if (choices.substr(i, i + 1) == "~") { choice3 = choicetextdump; }
        else { path3 = parseInt(choicetextdump); }
      }
      else if (choice4 == "")
      {
        if (choices.substr(i, i + 1) == "~") { choice4 = choicetextdump; }
        else { path4 = parseInt(choicetextdump); }
      }
    }
  }
  
  hp += hpincrease;
  sp += spincrease;
  
  if (hp > maxhp) { hp = maxhp; }
  if (sp > maxsp) { sp = maxsp; }

  document.getElementById("log").innerText = text;
  document.getElementById("hptext").innerText = "Health: " + hp + "/" + maxhp;
  document.getElementById("sptext").innerText = "Stamina: " + sp + "/" + maxsp;
  document.getElementById("hpbar").width = (document.getElementById("hpbar").width / maxhp) * hp;
  document.getElementById("spbar").width = (document.getElementById("spbar").width / maxsp) * sp;
  
  if (choice1 != ""){ document.getElementById("choice1").innerHTML = "<a href = '' onclick = 'selectEvent(1)'>" + choice1 +"</a>"; }
  if (choice2 != ""){ document.getElementById("choice2").innerHTML = "<a href = '' onclick = 'selectEvent(2)'>" + choice2 +"</a>"; }
  if (choice3 != ""){ document.getElementById("choice3").innerHTML = "<a href = '' onclick = 'selectEvent(3)'>" + choice3 +"</a>"; }
  if (choice4 != ""){ document.getElementById("choice4").innerHTML = "<a href = '' onclick = 'selectEvent(4)'>" + choice4 +"</a>"; }
  
  setCookie("hp", hp, 365);
  setCookie("sp", sp, 365);
  setCookie("maxhp", maxhp, 365);
  setCookie("maxsp", maxsp, 365);
</script>

</html>
